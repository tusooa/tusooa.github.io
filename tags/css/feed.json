{
    "version": "https://jsonfeed.org/version/1",
    "title": "何事西风不待人 • All posts by \"css\" tag",
    "description": "<span class='ts-langs-group'><span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'>A poet, painter, and programmer.</span><span class='ts-lang-zh-CN ts-langs ts-langs-show ts-langs-block'>写诗画画码代码的。</span></span>",
    "home_page_url": "http://tusooa.github.io",
    "items": [
        {
            "id": "http://tusooa.github.io/2020/10/10/Some-multilingual-hacks-on-Hexo/",
            "url": "http://tusooa.github.io/2020/10/10/Some-multilingual-hacks-on-Hexo/",
            "title": "<span class='ts-langs-group'> <span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'> Some multilingual hacks on Hexo </span> <span class='ts-lang-zh-CN ts-langs ts-langs-show ts-langs-block'> 瞎折腾Hexo的多语言 </span> </span>",
            "date_published": "2020-10-10T20:55:15.000Z",
            "content_html": "<p><span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'>I do not know why exactly I am so stubborn to insist on making this\nsite multilingual, and in a way that you may see multiple languages\nat the same time. But it is something.</span>\n<span class='ts-lang-zh-CN ts-langs ts-langs-block'>我自己也不明白为什么我执拗得一定要把这网站做成多语言的，还是叫人\n能同时看到多种语言的那种。但聊胜于无吧。</span></p>\n<a id=\"more\"></a>\n<h1 id=\"A-weird-thing-about-HexoHexo-的诡异事件\"><a href=\"#A-weird-thing-about-HexoHexo-的诡异事件\" class=\"headerlink\" title=\"A weird thing about HexoHexo 的诡异事件\"></a><span class='ts-langs-group'><span class='ts-lang-en ts-langs ts-langs-show'>A weird thing about Hexo</span><span class='ts-lang-zh-CN ts-langs'>Hexo 的诡异事件</span></span></h1><p><span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'>The <em>first</em> weird thing I got, when I was trying to figure out\n<a href=\"https://github.com/next-theme/hexo-theme-next\">hexo-theme-next</a>: sometimes <code>hexo server</code> gives\nthe perfect result, but when I <code>hexo generate</code> or <code>hexo deploy</code>,\nnothing will be correct. Everything is just malformed, and it\ndoes not change even if I <code>hexo clean</code>.</span>\n<span class='ts-lang-zh-CN ts-langs ts-langs-block'>我在折腾 <a href=\"https://github.com/next-theme/hexo-theme-next\">hexo-theme-next</a> 的时候碰到的第一个诡异事件是：\n有时候 <code>hexo server</code> 给出了个无懈可击的结果，但只要一 <code>hexo generate</code>\n或者 <code>hexo deploy</code>，全完蛋。整个网站看着都非常诡异，甚至我\n<code>hexo clean</code> 了之后也没有丝毫变化。</span></p>\n<p><span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'>After digging a lot into the source code, and enabling <code>--debug</code>,\nI finally found that there are some backup files that are also\nprocessed. And the content of those files <em>does</em> correspond to\nthe wrong contents on the site. &quot;Okay,&quot; hereby I say, &quot;this\nbehaviour is indeed ridiculous.&quot;</span>\n<span class='ts-lang-zh-CN ts-langs ts-langs-block'>钻进源码里东张西望了好久，再合着 <code>--debug</code> 的加成，我终于看到了一些备份文件\n也被处理了。而其内容<strong>确然</strong>是应了网站上有问题的东西。「行吧，」如是我说，\n「是事直令人齿冷。」</span></p>\n<p><span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'>And thus I added the ignore rules to ignore all such files,\nand everything is hopefully back in place.</span>\n<span class='ts-lang-zh-CN ts-langs ts-langs-block'>所以我加了忽略规则来忽略这种文件，世界终于清净了，谢天谢地。</span></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">ignore:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;**/*~&quot;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;**/#*&quot;</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">&quot;**/.#*&quot;</span></span><br></pre></td></tr></table></figure>\n<h1 id=\"NexT-39-s-language-switcherNexT-的语言切换器\"><a href=\"#NexT-39-s-language-switcherNexT-的语言切换器\" class=\"headerlink\" title=\"NexT&#39;s language switcherNexT 的语言切换器\"></a><span class='ts-langs-group'><span class='ts-lang-en ts-langs ts-langs-show'>NexT&#39;s language switcher</span><span class='ts-lang-zh-CN ts-langs'>NexT 的语言切换器</span></span></h1><p><span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'>That is an even more terrible part that comes in. Yes,\n<a href=\"https://github.com/next-theme/hexo-theme-next\">NexT</a> comes with such a thing called a\n&quot;language switcher,&quot; but it never takes you to a right\nplace. I cannot even get Hexo generate pages for\ndifferent languages, no matter how I change the <code>language</code>\nparameter in <code>_config.yml</code>. So whenever I click on the\nlanguage switcher, I got a 404. And it is hidden at the very\nbottom of the page --- How should one expect their visitor\nto dig into the deepest hole before they can switch languages?</span>\n<span class='ts-lang-zh-CN ts-langs ts-langs-block'></span></p>\n<p><span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'>So, well, since NexT&#39;s language switcher sucks, and multi-page\nstyle multi-language implementation is not feasible, why not just\nput everything all together? NexT at least provides a way to\ncustomize what texts are shown... in <code>languages.yml</code>.</span>\n<span class='ts-lang-zh-CN ts-langs ts-langs-block'></span></p>\n<p><span class='ts-lang-en ts-langs ts-langs-show ts-langs-block'>The main idea is to merge NexT&#39;s default translations into one.\nI made a Perl script for this. The text for every language is a\n<code>span</code>, and they are next to each other. Use css to put a divider\nbetween every visible <code>span</code>. Whether a language is shown is controlled\nby a JavaScript program that adds or removes classes from the elements.</span>\n<span class='ts-lang-zh-CN ts-langs ts-langs-block'></span></p>\n\n",
            "tags": [
                "坑",
                "javascript",
                "hexo",
                "css"
            ]
        }
    ]
}